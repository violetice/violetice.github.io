(function(e,n){var t=typeof e!=="undefined";var r=t&&"IntersectionObserver"in e;var i=Array.prototype.slice.call(n.querySelectorAll("img[srcset]"));if(!i||i.length===0){return}if(r){var o=new IntersectionObserver((function(e){e.forEach((({target:e,isIntersecting:n})=>{if(!n)return;e.setAttribute("srcset",e.src);e.onload=e.onerror=()=>o.unobserve(e)}))}),{threshold:[0],rootMargin:(e.innerHeight||n.documentElement.clientHeight)+"px"});i.map((e=>o.observe(e)))}else{function c(t){var r=t.getBoundingClientRect();var i=e.innerHeight||n.documentElement.clientHeight;var o=r.top;return o>=0&&o<=i*3||o<=0&&o<=-(i*2)-r.height}function s(e,n){var t=new Image;var r=e.getAttribute("src");t.onload=function(){e.srcset=r;n&&n()};t.srcset=r}var l=new Debouncer(a);function a(){for(var n=0;n<i.length;n++){if(c(i[n])){(function(e){var n=i[e];s(n,(function(){i=i.filter((function(e){return n!==e}))}))})(n)}}if(i.length===0){e.removeEventListener("scroll",l,false)}}e.addEventListener("scroll",l,false);l.handleEvent()}})(window,document);